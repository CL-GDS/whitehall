<%= render "components/datetime_fields", {
  date_heading: "Release date (required)",
  field_name: "release_date",
  prefix: "statistics_announcement_date_change",
  id: "statistics_announcement_date_change_release_date",
  year: {
    start_year: Date.today.year,
    end_year: Date.today.year + 5,
    id: "statistics_announcement_date_change_release_date_1i",
    value: statistics_announcement_date_change.release_date&.year
  },
  month: {
    id: "statistics_announcement_date_change_release_date_2i",
    value: statistics_announcement_date_change.release_date&.month
  },
  day: {
    id: "statistics_announcement_date_change_release_date_3i",
    value: statistics_announcement_date_change.release_date&.day
  },
  hour: {
    id: "statistics_announcement_date_change_release_date_4i",
    value: statistics_announcement_date_change.release_date&.hour
  },
  minute: {
    id: "statistics_announcement_date_change_release_date_5i",
    value: statistics_announcement_date_change.release_date&.min
  },
  error_items: errors_for(statistics_announcement_date_change.errors, :release_date),
}
%>

<%= render "govuk_publishing_components/components/radio", {
  heading: "Delivery date",
  name: "statistics_announcement_date_change[precision]",
  id: "statistics_announcement_date_change_precision",
  items: [
    {
      value: 0,
      text: "Exact date (provisional)",
      checked: statistics_announcement_date_change.precision == 0 && !statistics_announcement_date_change.confirmed
    },
    {
      value: 1,
      text: "Within one month (provisional)",
      checked: statistics_announcement_date_change.precision == 1
    },
    {
      value: 2,
      text: "Within two months (provisional)",
      checked: statistics_announcement_date_change.precision == 2
    },
    :or,
    {
      value: "exact_confirmed",
      text: "Exact date (confirmed)",
      checked: statistics_announcement_date_change.precision == 0 && statistics_announcement_date_change.confirmed
    }
  ],
  error_items: errors_for(statistics_announcement_date_change.errors, :precision),
} %>

