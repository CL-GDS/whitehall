<% class_name = class_name.presence || object.class.name.demodulize.underscore.humanize.downcase %>
<% input_class_name = parent_class.presence || object.class.to_s.underscore %>
<% verb = verb || "save" %>

<% if object.errors.present? %>
  <%= render "govuk_publishing_components/components/error_summary", {
    title: "To #{verb} the #{class_name} please fix the following issues:",
    items: object.errors.map do |error|
      analytics_action = "#{class_name}-error"
      error_message = error.full_message

      {
        text: error_message,
        href: "##{input_class_name}_#{error.attribute.to_s.gsub(".", "_")}",
        data_attributes: track_analytics_data("form-error", analytics_action, error_message)
      }
    end
  } %>
<% end %>
